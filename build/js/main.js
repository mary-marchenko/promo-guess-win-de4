"use strict";

// select match in drop
document.querySelectorAll('.dropdown.select').forEach(function (drop) {
  var summaryText = drop.querySelector('.select__current');
  var items = drop.querySelectorAll('.select__item input');
  items.forEach(function (input) {
    input.addEventListener('change', function () {
      // змінюємо текст у summary
      var text = input.nextElementSibling.textContent;
      summaryText.textContent = text;

      // закриваємо dropdown
      drop.removeAttribute('open');
    });
  });
});

// predict tabs: goal / score
var predictBlock = document.querySelector('.guessPage #predict');
if (predictBlock) {
  var switchToScore = function switchToScore() {
    tabScore === null || tabScore === void 0 || tabScore.classList.add('active');
    tabGoal === null || tabGoal === void 0 || tabGoal.classList.remove('active');
    containerScore === null || containerScore === void 0 || containerScore.classList.remove('hide');
    containerGoal === null || containerGoal === void 0 || containerGoal.classList.add('hide');
    lastScore === null || lastScore === void 0 || lastScore.classList.remove('hide');
    lastGoal === null || lastGoal === void 0 || lastGoal.classList.add('hide');
  };
  var switchToGoal = function switchToGoal() {
    tabGoal === null || tabGoal === void 0 || tabGoal.classList.add('active');
    tabGoal === null || tabGoal === void 0 || tabGoal.classList.remove('unactive');
    tabScore === null || tabScore === void 0 || tabScore.classList.remove('active');
    containerGoal === null || containerGoal === void 0 || containerGoal.classList.remove('hide');
    containerScore === null || containerScore === void 0 || containerScore.classList.add('hide');
    lastGoal === null || lastGoal === void 0 || lastGoal.classList.remove('hide');
    lastScore === null || lastScore === void 0 || lastScore.classList.add('hide');
  };
  var openPopupByAttr = function openPopupByAttr(popupAttr, popupClass) {
    document.body.style.overflow = 'hidden';
    var targetPopup = document.querySelector(".popup[data-popup=\"".concat(popupAttr, "\"]"));
    if (targetPopup) {
      targetPopup.classList.add('active');
      document.querySelector('.popups').classList.remove('_opacity');
      document.querySelector('.popups').classList.add("".concat(popupClass));
    }
  };
  var closeAllPopups = function closeAllPopups() {
    var popupsClass = ['_confirmPopup', '_bonusPopup'];
    popupWrap.classList.add('_opacity');
    popupsClass.forEach(function (popup) {
      popupWrap.classList.remove(popup);
    });
    document.body.style.overflow = 'auto';
  };
  var tabScore = predictBlock.querySelector('.predict__tabs-item.score');
  var tabGoal = predictBlock.querySelector('.predict__tabs-item.goal');
  var containerScore = predictBlock.querySelector('.predict__container.score');
  var containerGoal = predictBlock.querySelector('.predict__container.goal');
  var lastScore = predictBlock.querySelector('.predict__last-item.score');
  var lastGoal = predictBlock.querySelector('.predict__last-item.goal');
  tabScore === null || tabScore === void 0 || tabScore.addEventListener('click', switchToScore);
  tabGoal === null || tabGoal === void 0 || tabGoal.addEventListener('click', function (e) {
    if (tabGoal !== null && tabGoal !== void 0 && tabGoal.classList.contains('unactive')) return;
    switchToGoal();
  });

  // popups

  var popupWrap = document.querySelector('.popups');
  popupWrap.addEventListener('click', function (e) {
    if (e.target.closest(".popups__item-close")) {
      closeAllPopups();
    }
  });

  // Відкрити попап по кліку на будь-який елемент з data-popup (наприклад .btn-thanks, .bonus__btn)
  document.addEventListener('click', function (e) {
    var opener = e.target.closest('[data-popup]');
    if (!opener) return;
    // не відкривати при кліку всередині попапа (наприклад по кнопці закриття)
    if (opener.classList.contains('popup')) return;
    var attr = opener.dataset.popup;
    if (!attr) return;
    var popupClass = '_' + attr;
    openPopupByAttr(attr, popupClass);

    // У блоці вітання (confirmPopup): показувати score або goal залежно від data-variant кнопки
    if (attr === 'confirmPopup') {
      var variant = opener.dataset.variant || 'score';
      var popup = document.querySelector('.popup[data-popup="confirmPopup"]');
      if (popup) {
        var scoreBlock = popup.querySelector('.predict__last-item.score');
        var goalBlock = popup.querySelector('.predict__last-item.goal');
        if (variant === 'goal') {
          scoreBlock === null || scoreBlock === void 0 || scoreBlock.classList.add('hide');
          goalBlock === null || goalBlock === void 0 || goalBlock.classList.remove('hide');
        } else {
          scoreBlock === null || scoreBlock === void 0 || scoreBlock.classList.remove('hide');
          goalBlock === null || goalBlock === void 0 || goalBlock.classList.add('hide');
        }
      }
    }
  });

  // radio: "Перший гол" — один контейнер на матч (.predict__container.goal), пункти — .predict__radio
  var radioGoalContainers = document.querySelectorAll('.predict__container.goal');
  radioGoalContainers.forEach(function (goalBlock) {
    var radioItems = goalBlock.querySelectorAll('.predict__radio');
    radioItems.forEach(function (radioEl) {
      var input = radioEl.querySelector('input[type="radio"]');
      if (!input) return;
      input.addEventListener('change', function () {
        radioItems.forEach(function (item) {
          return item.classList.remove('_active');
        });
        radioEl.classList.add('_active');
      });
    });
    var checkedInput = goalBlock.querySelector('.predict__radio input:checked');
    if (checkedInput) {
      checkedInput.closest('.predict__radio').classList.add('_active');
    }
  });

  // predict__team-control: плюс/мінус окремо для кожного блоку, мін. 0
  predictBlock.addEventListener('click', function (e) {
    var control = e.target.closest('.predict__team-control');
    if (!control) return;
    var numberEl = control.querySelector('.predict__team-number');
    if (!numberEl) return;
    var value = parseInt(numberEl.textContent, 10) || 0;
    if (e.target.closest('.predict__team-increase')) {
      numberEl.textContent = value + 1;
    } else if (e.target.closest('.predict__team-decrease')) {
      if (value > 0) numberEl.textContent = value - 1;
    }
  });

  //calc
  document.querySelectorAll('.predict__calc-forecasts--item').forEach(function (item) {
    item.addEventListener('click', function () {
      document.querySelectorAll('.predict__calc-forecasts--item').forEach(function (el) {
        return el.classList.remove('active');
      });
      this.classList.toggle('active');
    });
  });

  // !!! TEST !!!

  document.addEventListener("DOMContentLoaded", function () {
    var _document$querySelect;
    (_document$querySelect = document.querySelector(".menu-btn")) === null || _document$querySelect === void 0 || _document$querySelect.addEventListener("click", function () {
      var _document$querySelect2;
      (_document$querySelect2 = document.querySelector(".menu-test")) === null || _document$querySelect2 === void 0 || _document$querySelect2.classList.toggle("hide");
    });
  });
  var btnUnactiveGoal = document.querySelector('.menu-test .unactiveGoal');
  var btnTooltip = document.querySelector('.menu-test .tooltip');
  btnUnactiveGoal === null || btnUnactiveGoal === void 0 || btnUnactiveGoal.addEventListener('click', function () {
    switchToScore();
    tabGoal === null || tabGoal === void 0 || tabGoal.classList.add('unactive');
  });
  btnTooltip === null || btnTooltip === void 0 ? void 0 : btnTooltip.addEventListener('click', function () {
    tabGoal === null || tabGoal === void 0 || tabGoal.classList.toggle('_tooltip-visible');
  });
}
'use strict';

(function () {
  var SLIDE_WIDTH = 216;
  var SLIDE_MARGIN = 10;
  var SLIDE_STEP = SLIDE_WIDTH + SLIDE_MARGIN * 2;
  var SWIPE_THRESHOLD = 50;
  var TRANSITION_DURATION = 400;
  function initTableSlider() {
    var viewport = document.querySelector('.guessPage .table__wrapper-viewport');
    var track = document.querySelector('.guessPage .table__tabs');
    var arrows = document.querySelectorAll('.guessPage .table__arrow');
    if (!viewport || !track) return;
    if (track.hasAttribute('data-table-slider-inited')) return;
    var items = Array.from(track.querySelectorAll('.table__tabs-item'));
    var total = items.length;
    if (total === 0) return;

    // for 2 teams
    if (total === 2) {
      var updateTabs = function updateTabs() {
        items.forEach(function (slide, i) {
          slide.classList.toggle('active', i === _current);
          slide.classList.add('visible');
        });
      };
      var _goToIndex = function _goToIndex(index) {
        if (index < 0 || index >= total || index === _current) return;
        _current = index;
        updateTabs();
      };
      track.setAttribute('data-table-slider-inited', 'true');
      track.style.transition = 'none';
      track.style.transform = 'none';
      track.style.justifyContent = 'center';
      arrows.forEach(function (btn) {
        btn.style.display = 'none';
      });
      var _current = 0;
      var _initiallyActive = items.findIndex(function (el) {
        return el.classList.contains('active');
      });
      if (_initiallyActive >= 0) _current = _initiallyActive;
      track.addEventListener('click', function (e) {
        var slide = e.target.closest('.table__tabs-item');
        if (!slide) return;
        var idx = items.indexOf(slide);
        if (idx !== -1) _goToIndex(idx);
      });
      updateTabs();
      return {
        next: function next() {},
        prev: function prev() {}
      };
    }
    track.setAttribute('data-table-slider-inited', 'true');
    var count = total;
    var current = 0;
    var initiallyActive = items.findIndex(function (el) {
      return el.classList.contains('active');
    });
    if (initiallyActive >= 0) current = initiallyActive;
    function getTranslateX(index) {
      var vw = viewport.getBoundingClientRect().width;
      // Центр слайду: лівий margin (10px) + позиція слайду + половина ширини
      var slideCenterX = SLIDE_MARGIN + index * SLIDE_STEP + SLIDE_WIDTH / 2;
      return vw / 2 - slideCenterX;
    }
    function isSingleTabMode() {
      return window.innerWidth < 1050;
    }

    // Активний по центру; справа — наступні матчі (visible), зліва — попередні
    function setClasses() {
      var singleTabMode = isSingleTabMode();
      var leftVisible = current - 1;
      var rightVisible = current + 1;
      items.forEach(function (el, i) {
        el.classList.toggle('active', i === current);
        el.classList.toggle('visible', !singleTabMode && (i === leftVisible || i === rightVisible));
      });
    }
    function updateArrows() {
      arrows.forEach(function (btn) {
        if (btn.classList.contains('table__arrow--left')) {
          btn.style.visibility = current === 0 ? 'hidden' : 'visible';
        } else {
          btn.style.visibility = current === count - 1 ? 'hidden' : 'visible';
        }
      });
    }
    function update() {
      var useTransition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      track.style.transition = useTransition ? "transform ".concat(TRANSITION_DURATION, "ms ease") : 'none';
      track.style.transform = "translate3d(".concat(getTranslateX(current), "px, 0, 0)");
      setClasses();
      updateArrows();
    }
    function next() {
      if (current >= count - 1) return;
      current += 1;
      update();
    }
    function prev() {
      if (current <= 0) return;
      current -= 1;
      update();
    }
    function goToIndex(index) {
      if (index < 0 || index >= count || index === current) return;
      current = index;
      update();
    }

    // arrows
    arrows.forEach(function (btn) {
      btn.addEventListener('click', function () {
        if (btn.classList.contains('table__arrow--left')) prev();else next();
      });
    });

    // click
    track.addEventListener('click', function (e) {
      var slide = e.target.closest('.table__tabs-item');
      if (!slide || slide.classList.contains('active')) return;
      var match = slide.getAttribute('data-match');
      if (match) {
        var idx = parseInt(match, 10) - 1;
        if (idx >= 0 && idx < count) goToIndex(idx);
      }
    });

    // swipe
    var startX = 0;
    viewport.addEventListener('pointerdown', function (e) {
      startX = e.clientX;
    }, {
      passive: true
    });
    viewport.addEventListener('pointerup', function (e) {
      var diff = e.clientX - startX;
      if (diff > SWIPE_THRESHOLD) prev();
      if (diff < -SWIPE_THRESHOLD) next();
    }, {
      passive: true
    });
    viewport.addEventListener('touchstart', function (e) {
      if (e.touches.length === 1) startX = e.touches[0].clientX;
    }, {
      passive: true
    });
    viewport.addEventListener('touchend', function (e) {
      if (e.changedTouches.length !== 1) return;
      var diff = e.changedTouches[0].clientX - startX;
      if (diff > SWIPE_THRESHOLD) prev();
      if (diff < -SWIPE_THRESHOLD) next();
    }, {
      passive: true
    });

    // resize
    var resizeTimer;
    window.addEventListener('resize', function () {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function () {
        return update(false);
      }, 100);
    });
    update(false);
    return {
      next: next,
      prev: prev
    };
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTableSlider);
  } else {
    initTableSlider();
  }
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJ0YWJsZS1zbGlkZXIuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImRyb3AiLCJzdW1tYXJ5VGV4dCIsInF1ZXJ5U2VsZWN0b3IiLCJpdGVtcyIsImlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRleHQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsInJlbW92ZUF0dHJpYnV0ZSIsInByZWRpY3RCbG9jayIsInN3aXRjaFRvU2NvcmUiLCJ0YWJTY29yZSIsImNsYXNzTGlzdCIsImFkZCIsInRhYkdvYWwiLCJyZW1vdmUiLCJjb250YWluZXJTY29yZSIsImNvbnRhaW5lckdvYWwiLCJsYXN0U2NvcmUiLCJsYXN0R29hbCIsInN3aXRjaFRvR29hbCIsIm9wZW5Qb3B1cEJ5QXR0ciIsInBvcHVwQXR0ciIsInBvcHVwQ2xhc3MiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsInRhcmdldFBvcHVwIiwiY29uY2F0IiwiY2xvc2VBbGxQb3B1cHMiLCJwb3B1cHNDbGFzcyIsInBvcHVwV3JhcCIsInBvcHVwIiwiZSIsImNvbnRhaW5zIiwidGFyZ2V0IiwiY2xvc2VzdCIsIm9wZW5lciIsImF0dHIiLCJkYXRhc2V0IiwidmFyaWFudCIsInNjb3JlQmxvY2siLCJnb2FsQmxvY2siLCJyYWRpb0dvYWxDb250YWluZXJzIiwicmFkaW9JdGVtcyIsInJhZGlvRWwiLCJpdGVtIiwiY2hlY2tlZElucHV0IiwiY29udHJvbCIsIm51bWJlckVsIiwidmFsdWUiLCJwYXJzZUludCIsImVsIiwidG9nZ2xlIiwiX2RvY3VtZW50JHF1ZXJ5U2VsZWN0IiwiX2RvY3VtZW50JHF1ZXJ5U2VsZWN0MiIsImJ0blVuYWN0aXZlR29hbCIsImJ0blRvb2x0aXAiLCJTTElERV9XSURUSCIsIlNMSURFX01BUkdJTiIsIlNMSURFX1NURVAiLCJTV0lQRV9USFJFU0hPTEQiLCJUUkFOU0lUSU9OX0RVUkFUSU9OIiwiaW5pdFRhYmxlU2xpZGVyIiwidmlld3BvcnQiLCJ0cmFjayIsImFycm93cyIsImhhc0F0dHJpYnV0ZSIsIkFycmF5IiwiZnJvbSIsInRvdGFsIiwibGVuZ3RoIiwidXBkYXRlVGFicyIsInNsaWRlIiwiaSIsImN1cnJlbnQiLCJnb1RvSW5kZXgiLCJpbmRleCIsInNldEF0dHJpYnV0ZSIsInRyYW5zaXRpb24iLCJ0cmFuc2Zvcm0iLCJqdXN0aWZ5Q29udGVudCIsImJ0biIsImRpc3BsYXkiLCJpbml0aWFsbHlBY3RpdmUiLCJmaW5kSW5kZXgiLCJpZHgiLCJpbmRleE9mIiwibmV4dCIsInByZXYiLCJjb3VudCIsImdldFRyYW5zbGF0ZVgiLCJ2dyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwic2xpZGVDZW50ZXJYIiwiaXNTaW5nbGVUYWJNb2RlIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInNldENsYXNzZXMiLCJzaW5nbGVUYWJNb2RlIiwibGVmdFZpc2libGUiLCJyaWdodFZpc2libGUiLCJ1cGRhdGVBcnJvd3MiLCJ2aXNpYmlsaXR5IiwidXBkYXRlIiwidXNlVHJhbnNpdGlvbiIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIm1hdGNoIiwiZ2V0QXR0cmlidXRlIiwic3RhcnRYIiwiY2xpZW50WCIsInBhc3NpdmUiLCJkaWZmIiwidG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIiwicmVzaXplVGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmVhZHlTdGF0ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBQSxRQUFRLENBQUNDLGdCQUFnQixDQUFDLGtCQUFrQixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBQyxJQUFJLEVBQUk7RUFDMUQsSUFBTUMsV0FBVyxHQUFHRCxJQUFJLENBQUNFLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztFQUMxRCxJQUFNQyxLQUFLLEdBQUdILElBQUksQ0FBQ0YsZ0JBQWdCLENBQUMscUJBQXFCLENBQUM7RUFFMURLLEtBQUssQ0FB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QUFTLEVBQUU7SUFDckM1SCxRQUFRLENBQUNRLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFMkQsZUFBZSxDQUFDO0VBQ2hFLENBQUMsTUFBTTtJQUNMQSxlQUFlLENBQUMsQ0FBQztFQUNuQjtBQUNGLENBQUMsRUFBRSxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzZWxlY3QgbWF0Y2ggaW4gZHJvcFxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyb3Bkb3duLnNlbGVjdCcpLmZvckVhY2goZHJvcCA9PiB7XG4gICAgY29uc3Qgc3VtbWFyeVRleHQgPSBkcm9wLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RfX2N1cnJlbnQnKTtcbiAgICBjb25zdCBpdGVtcyA9IGRyb3AucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdF9faXRlbSBpbnB1dCcpO1xuXG4gICAgaXRlbXMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIC8vINC30LzRltC90Y7RlNC80L4g0YLQtdC60YHRgiDRgyBzdW1tYXJ5XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50O1xuICAgICAgICAgICAgc3VtbWFyeVRleHQudGV4dENvbnRlbnQgPSB0ZXh0O1xuXG4gICAgICAgICAgICAvLyDQt9Cw0LrRgNC40LLQsNGU0LzQviBkcm9wZG93blxuICAgICAgICAgICAgZHJvcC5yZW1vdmVBdHRyaWJ1dGUoJ29wZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxuLy8gcHJlZGljdCB0YWJzOiBnb2FsIC8gc2NvcmVcbmNvbnN0IHByZWRpY3RCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ndWVzc1BhZ2UgI3ByZWRpY3QnKTtcbmlmIChwcmVkaWN0QmxvY2spIHtcbiAgICBjb25zdCB0YWJTY29yZSA9IHByZWRpY3RCbG9jay5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fdGFicy1pdGVtLnNjb3JlJyk7XG4gICAgY29uc3QgdGFiR29hbCA9IHByZWRpY3RCbG9jay5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fdGFicy1pdGVtLmdvYWwnKTtcbiAgICBjb25zdCBjb250YWluZXJTY29yZSA9IHByZWRpY3RCbG9jay5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fY29udGFpbmVyLnNjb3JlJyk7XG4gICAgY29uc3QgY29udGFpbmVyR29hbCA9IHByZWRpY3RCbG9jay5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fY29udGFpbmVyLmdvYWwnKTtcbiAgICBjb25zdCBsYXN0U2NvcmUgPSBwcmVkaWN0QmxvY2sucXVlcnlTZWxlY3RvcignLnByZWRpY3RfX2xhc3QtaXRlbS5zY29yZScpO1xuICAgIGNvbnN0IGxhc3RHb2FsID0gcHJlZGljdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X19sYXN0LWl0ZW0uZ29hbCcpO1xuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9TY29yZSgpIHtcbiAgICAgICAgdGFiU2NvcmU/LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB0YWJHb2FsPy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgY29udGFpbmVyU2NvcmU/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgY29udGFpbmVyR29hbD8uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBsYXN0U2NvcmU/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgbGFzdEdvYWw/LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2l0Y2hUb0dvYWwoKSB7XG4gICAgICAgIHRhYkdvYWw/LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB0YWJHb2FsPy5jbGFzc0xpc3QucmVtb3ZlKCd1bmFjdGl2ZScpO1xuICAgICAgICB0YWJTY29yZT8uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIGNvbnRhaW5lckdvYWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgY29udGFpbmVyU2NvcmU/LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgbGFzdEdvYWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgbGFzdFNjb3JlPy5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgdGFiU2NvcmU/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpdGNoVG9TY29yZSk7XG4gICAgdGFiR29hbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAodGFiR29hbD8uY2xhc3NMaXN0LmNvbnRhaW5zKCd1bmFjdGl2ZScpKSByZXR1cm47XG4gICAgICAgIHN3aXRjaFRvR29hbCgpO1xuICAgIH0pO1xuXG4gICAgLy8gcG9wdXBzXG5cbiAgICBjb25zdCBwb3B1cFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBzJyk7XG5cbiAgICBmdW5jdGlvbiBvcGVuUG9wdXBCeUF0dHIocG9wdXBBdHRyLCBwb3B1cENsYXNzKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgY29uc3QgdGFyZ2V0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBbZGF0YS1wb3B1cD1cIiR7cG9wdXBBdHRyfVwiXWApO1xuICAgICAgICBpZiAodGFyZ2V0UG9wdXApIHtcbiAgICAgICAgICAgIHRhcmdldFBvcHVwLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwcycpLmNsYXNzTGlzdC5yZW1vdmUoJ19vcGFjaXR5Jyk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBzJykuY2xhc3NMaXN0LmFkZChgJHtwb3B1cENsYXNzfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VBbGxQb3B1cHMoKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwc0NsYXNzID0gWydfY29uZmlybVBvcHVwJywgJ19ib251c1BvcHVwJ107XG5cbiAgICAgICAgcG9wdXBXcmFwLmNsYXNzTGlzdC5hZGQoJ19vcGFjaXR5Jyk7XG4gICAgICAgIHBvcHVwc0NsYXNzLmZvckVhY2gocG9wdXAgPT4ge1xuICAgICAgICAgICAgcG9wdXBXcmFwLmNsYXNzTGlzdC5yZW1vdmUocG9wdXApO1xuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgICB9XG5cbiAgICBwb3B1cFdyYXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwc19faXRlbS1jbG9zZVwiKSkge1xuICAgICAgICAgICAgY2xvc2VBbGxQb3B1cHMoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4vLyDQktGW0LTQutGA0LjRgtC4INC/0L7Qv9Cw0L8g0L/QviDQutC70ZbQutGDINC90LAg0LHRg9C00Ywt0Y/QutC40Lkg0LXQu9C10LzQtdC90YIg0LcgZGF0YS1wb3B1cCAo0L3QsNC/0YDQuNC60LvQsNC0IC5idG4tdGhhbmtzLCAuYm9udXNfX2J0bilcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc3Qgb3BlbmVyID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtcG9wdXBdJyk7XG4gICAgICAgIGlmICghb3BlbmVyKSByZXR1cm47XG4gICAgICAgIC8vINC90LUg0LLRltC00LrRgNC40LLQsNGC0Lgg0L/RgNC4INC60LvRltC60YMg0LLRgdC10YDQtdC00LjQvdGWINC/0L7Qv9Cw0L/QsCAo0L3QsNC/0YDQuNC60LvQsNC0INC/0L4g0LrQvdC+0L/RhtGWINC30LDQutGA0LjRgtGC0Y8pXG4gICAgICAgIGlmIChvcGVuZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGF0dHIgPSBvcGVuZXIuZGF0YXNldC5wb3B1cDtcbiAgICAgICAgaWYgKCFhdHRyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvcHVwQ2xhc3MgPSAnXycgKyBhdHRyO1xuICAgICAgICBvcGVuUG9wdXBCeUF0dHIoYXR0ciwgcG9wdXBDbGFzcyk7XG5cbiAgICAgICAgLy8g0KMg0LHQu9C+0YbRliDQstGW0YLQsNC90L3RjyAoY29uZmlybVBvcHVwKTog0L/QvtC60LDQt9GD0LLQsNGC0Lggc2NvcmUg0LDQsdC+IGdvYWwg0LfQsNC70LXQttC90L4g0LLRltC0IGRhdGEtdmFyaWFudCDQutC90L7Qv9C60LhcbiAgICAgICAgaWYgKGF0dHIgPT09ICdjb25maXJtUG9wdXAnKSB7XG4gICAgICAgICAgICBjb25zdCB2YXJpYW50ID0gb3BlbmVyLmRhdGFzZXQudmFyaWFudCB8fCAnc2NvcmUnO1xuICAgICAgICAgICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBbZGF0YS1wb3B1cD1cImNvbmZpcm1Qb3B1cFwiXScpO1xuICAgICAgICAgICAgaWYgKHBvcHVwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NvcmVCbG9jayA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X19sYXN0LWl0ZW0uc2NvcmUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBnb2FsQmxvY2sgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fbGFzdC1pdGVtLmdvYWwnKTtcbiAgICAgICAgICAgICAgICBpZiAodmFyaWFudCA9PT0gJ2dvYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3JlQmxvY2s/LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZ29hbEJsb2NrPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVCbG9jaz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICBnb2FsQmxvY2s/LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHJhZGlvOiBcItCf0LXRgNGI0LjQuSDQs9C+0LtcIiDigJQg0L7QtNC40L0g0LrQvtC90YLQtdC50L3QtdGAINC90LAg0LzQsNGC0YcgKC5wcmVkaWN0X19jb250YWluZXIuZ29hbCksINC/0YPQvdC60YLQuCDigJQgLnByZWRpY3RfX3JhZGlvXG4gICAgY29uc3QgcmFkaW9Hb2FsQ29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVkaWN0X19jb250YWluZXIuZ29hbCcpO1xuXG4gICAgcmFkaW9Hb2FsQ29udGFpbmVycy5mb3JFYWNoKGdvYWxCbG9jayA9PiB7XG4gICAgICAgIGNvbnN0IHJhZGlvSXRlbXMgPSBnb2FsQmxvY2sucXVlcnlTZWxlY3RvckFsbCgnLnByZWRpY3RfX3JhZGlvJyk7XG5cbiAgICAgICAgcmFkaW9JdGVtcy5mb3JFYWNoKHJhZGlvRWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYWRpb0VsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xuICAgICAgICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByYWRpb0l0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ19hY3RpdmUnKSk7XG4gICAgICAgICAgICAgICAgcmFkaW9FbC5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjaGVja2VkSW5wdXQgPSBnb2FsQmxvY2sucXVlcnlTZWxlY3RvcignLnByZWRpY3RfX3JhZGlvIGlucHV0OmNoZWNrZWQnKTtcbiAgICAgICAgaWYgKGNoZWNrZWRJbnB1dCkge1xuICAgICAgICAgICAgY2hlY2tlZElucHV0LmNsb3Nlc3QoJy5wcmVkaWN0X19yYWRpbycpLmNsYXNzTGlzdC5hZGQoJ19hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBwcmVkaWN0X190ZWFtLWNvbnRyb2w6INC/0LvRjtGBL9C80ZbQvdGD0YEg0L7QutGA0LXQvNC+INC00LvRjyDQutC+0LbQvdC+0LPQviDQsdC70L7QutGDLCDQvNGW0L0uIDBcbiAgICBwcmVkaWN0QmxvY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSBlLnRhcmdldC5jbG9zZXN0KCcucHJlZGljdF9fdGVhbS1jb250cm9sJyk7XG4gICAgICAgIGlmICghY29udHJvbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBudW1iZXJFbCA9IGNvbnRyb2wucXVlcnlTZWxlY3RvcignLnByZWRpY3RfX3RlYW0tbnVtYmVyJyk7XG4gICAgICAgIGlmICghbnVtYmVyRWwpIHJldHVybjtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQobnVtYmVyRWwudGV4dENvbnRlbnQsIDEwKSB8fCAwO1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnByZWRpY3RfX3RlYW0taW5jcmVhc2UnKSkge1xuICAgICAgICAgICAgbnVtYmVyRWwudGV4dENvbnRlbnQgPSB2YWx1ZSArIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnByZWRpY3RfX3RlYW0tZGVjcmVhc2UnKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkgbnVtYmVyRWwudGV4dENvbnRlbnQgPSB2YWx1ZSAtIDE7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vY2FsY1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVkaWN0X19jYWxjLWZvcmVjYXN0cy0taXRlbScpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVkaWN0X19jYWxjLWZvcmVjYXN0cy0taXRlbScpLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuXG4gICAgLy8gISEhIFRFU1QgISEhXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idG5cIik/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtdGVzdFwiKT8uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5cbiAgICBjb25zdCBidG5VbmFjdGl2ZUdvYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS10ZXN0IC51bmFjdGl2ZUdvYWwnKTtcbiAgICBjb25zdCBidG5Ub29sdGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtdGVzdCAudG9vbHRpcCcpO1xuXG4gICAgYnRuVW5hY3RpdmVHb2FsPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc3dpdGNoVG9TY29yZSgpO1xuICAgICAgICB0YWJHb2FsPy5jbGFzc0xpc3QuYWRkKCd1bmFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgYnRuVG9vbHRpcD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRhYkdvYWw/LmNsYXNzTGlzdC50b2dnbGUoJ190b29sdGlwLXZpc2libGUnKTtcbiAgICB9KTtcbn1cblxuXG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IFNMSURFX1dJRFRIID0gMjE2O1xuICBjb25zdCBTTElERV9NQVJHSU4gPSAxMDtcbiAgY29uc3QgU0xJREVfU1RFUCA9IFNMSURFX1dJRFRIICsgU0xJREVfTUFSR0lOICogMjtcbiAgY29uc3QgU1dJUEVfVEhSRVNIT0xEID0gNTA7XG4gIGNvbnN0IFRSQU5TSVRJT05fRFVSQVRJT04gPSA0MDA7XG5cbiAgZnVuY3Rpb24gaW5pdFRhYmxlU2xpZGVyKCkge1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmd1ZXNzUGFnZSAudGFibGVfX3dyYXBwZXItdmlld3BvcnQnKTtcbiAgICBjb25zdCB0cmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ndWVzc1BhZ2UgLnRhYmxlX190YWJzJyk7XG4gICAgY29uc3QgYXJyb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmd1ZXNzUGFnZSAudGFibGVfX2Fycm93Jyk7XG4gICAgaWYgKCF2aWV3cG9ydCB8fCAhdHJhY2spIHJldHVybjtcblxuICAgIGlmICh0cmFjay5oYXNBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtc2xpZGVyLWluaXRlZCcpKSByZXR1cm47XG5cbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20odHJhY2sucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlX190YWJzLWl0ZW0nKSk7XG4gICAgY29uc3QgdG90YWwgPSBpdGVtcy5sZW5ndGg7XG4gICAgaWYgKHRvdGFsID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBmb3IgMiB0ZWFtc1xuICAgIGlmICh0b3RhbCA9PT0gMikge1xuICAgICAgdHJhY2suc2V0QXR0cmlidXRlKCdkYXRhLXRhYmxlLXNsaWRlci1pbml0ZWQnLCAndHJ1ZScpO1xuICAgICAgdHJhY2suc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgIHRyYWNrLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcbiAgICAgIHRyYWNrLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG5cbiAgICAgIGFycm93cy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgICAgYnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9KTtcblxuICAgICAgbGV0IGN1cnJlbnQgPSAwO1xuICAgICAgY29uc3QgaW5pdGlhbGx5QWN0aXZlID0gaXRlbXMuZmluZEluZGV4KChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSk7XG4gICAgICBpZiAoaW5pdGlhbGx5QWN0aXZlID49IDApIGN1cnJlbnQgPSBpbml0aWFsbHlBY3RpdmU7XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYnMoKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goKHNsaWRlLCBpKSA9PiB7XG4gICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gY3VycmVudCk7XG4gICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ29Ub0luZGV4KGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdG90YWwgfHwgaW5kZXggPT09IGN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgY3VycmVudCA9IGluZGV4O1xuICAgICAgICB1cGRhdGVUYWJzKCk7XG4gICAgICB9XG5cbiAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudGFibGVfX3RhYnMtaXRlbScpO1xuICAgICAgICBpZiAoIXNsaWRlKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGlkeCA9IGl0ZW1zLmluZGV4T2Yoc2xpZGUpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSkgZ29Ub0luZGV4KGlkeCk7XG4gICAgICB9KTtcblxuICAgICAgdXBkYXRlVGFicygpO1xuICAgICAgcmV0dXJuIHsgbmV4dDogKCkgPT4ge30sIHByZXY6ICgpID0+IHt9IH07XG4gICAgfVxuXG5cbiAgICB0cmFjay5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFibGUtc2xpZGVyLWluaXRlZCcsICd0cnVlJyk7XG5cbiAgICBjb25zdCBjb3VudCA9IHRvdGFsO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAwO1xuICAgIGNvbnN0IGluaXRpYWxseUFjdGl2ZSA9IGl0ZW1zLmZpbmRJbmRleCgoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpO1xuICAgIGlmIChpbml0aWFsbHlBY3RpdmUgPj0gMCkgY3VycmVudCA9IGluaXRpYWxseUFjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGdldFRyYW5zbGF0ZVgoaW5kZXgpIHtcbiAgICAgIGNvbnN0IHZ3ID0gdmlld3BvcnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAvLyDQptC10L3RgtGAINGB0LvQsNC50LTRgzog0LvRltCy0LjQuSBtYXJnaW4gKDEwcHgpICsg0L/QvtC30LjRhtGW0Y8g0YHQu9Cw0LnQtNGDICsg0L/QvtC70L7QstC40L3QsCDRiNC40YDQuNC90LhcbiAgICAgIGNvbnN0IHNsaWRlQ2VudGVyWCA9IFNMSURFX01BUkdJTiArIGluZGV4ICogU0xJREVfU1RFUCArIFNMSURFX1dJRFRIIC8gMjtcbiAgICAgIHJldHVybiB2dyAvIDIgLSBzbGlkZUNlbnRlclg7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTaW5nbGVUYWJNb2RlKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDwgMTA1MDtcbiAgICB9XG5cbiAgICAvLyDQkNC60YLQuNCy0L3QuNC5INC/0L4g0YbQtdC90YLRgNGDOyDRgdC/0YDQsNCy0LAg4oCUINC90LDRgdGC0YPQv9C90ZYg0LzQsNGC0YfRliAodmlzaWJsZSksINC30LvRltCy0LAg4oCUINC/0L7Qv9C10YDQtdC00L3RllxuICAgIGZ1bmN0aW9uIHNldENsYXNzZXMoKSB7XG4gICAgICBjb25zdCBzaW5nbGVUYWJNb2RlID0gaXNTaW5nbGVUYWJNb2RlKCk7XG4gICAgICBjb25zdCBsZWZ0VmlzaWJsZSA9IGN1cnJlbnQgLSAxO1xuICAgICAgY29uc3QgcmlnaHRWaXNpYmxlID0gY3VycmVudCArIDE7XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goKGVsLCBpKSA9PiB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGkgPT09IGN1cnJlbnQpO1xuICAgICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJywgIXNpbmdsZVRhYk1vZGUgJiYgKGkgPT09IGxlZnRWaXNpYmxlIHx8IGkgPT09IHJpZ2h0VmlzaWJsZSkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlQXJyb3dzKCkge1xuICAgICAgYXJyb3dzLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgICBpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucygndGFibGVfX2Fycm93LS1sZWZ0JykpIHtcbiAgICAgICAgICBidG4uc3R5bGUudmlzaWJpbGl0eSA9IGN1cnJlbnQgPT09IDAgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidG4uc3R5bGUudmlzaWJpbGl0eSA9IGN1cnJlbnQgPT09IGNvdW50IC0gMSA/ICdoaWRkZW4nIDogJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGUodXNlVHJhbnNpdGlvbiA9IHRydWUpIHtcbiAgICAgIHRyYWNrLnN0eWxlLnRyYW5zaXRpb24gPSB1c2VUcmFuc2l0aW9uXG4gICAgICAgID8gYHRyYW5zZm9ybSAke1RSQU5TSVRJT05fRFVSQVRJT059bXMgZWFzZWBcbiAgICAgICAgOiAnbm9uZSc7XG4gICAgICB0cmFjay5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHtnZXRUcmFuc2xhdGVYKGN1cnJlbnQpfXB4LCAwLCAwKWA7XG4gICAgICBzZXRDbGFzc2VzKCk7XG4gICAgICB1cGRhdGVBcnJvd3MoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgaWYgKGN1cnJlbnQgPj0gY291bnQgLSAxKSByZXR1cm47XG4gICAgICBjdXJyZW50ICs9IDE7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmV2KCkge1xuICAgICAgaWYgKGN1cnJlbnQgPD0gMCkgcmV0dXJuO1xuICAgICAgY3VycmVudCAtPSAxO1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ29Ub0luZGV4KGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGNvdW50IHx8IGluZGV4ID09PSBjdXJyZW50KSByZXR1cm47XG4gICAgICBjdXJyZW50ID0gaW5kZXg7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG5cbiAgICAvLyBhcnJvd3NcbiAgICBhcnJvd3MuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWJsZV9fYXJyb3ctLWxlZnQnKSkgcHJldigpO1xuICAgICAgICBlbHNlIG5leHQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gY2xpY2tcbiAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCBzbGlkZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50YWJsZV9fdGFicy1pdGVtJyk7XG4gICAgICBpZiAoIXNsaWRlIHx8IHNsaWRlLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVybjtcbiAgICAgIGNvbnN0IG1hdGNoID0gc2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLW1hdGNoJyk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgY29uc3QgaWR4ID0gcGFyc2VJbnQobWF0Y2gsIDEwKSAtIDE7XG4gICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCBjb3VudCkgZ29Ub0luZGV4KGlkeCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzd2lwZVxuICAgIGxldCBzdGFydFggPSAwO1xuICAgIHZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpID0+IHtcbiAgICAgIHN0YXJ0WCA9IGUuY2xpZW50WDtcbiAgICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgdmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGRpZmYgPSBlLmNsaWVudFggLSBzdGFydFg7XG4gICAgICBpZiAoZGlmZiA+IFNXSVBFX1RIUkVTSE9MRCkgcHJldigpO1xuICAgICAgaWYgKGRpZmYgPCAtU1dJUEVfVEhSRVNIT0xEKSBuZXh0KCk7XG4gICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgdmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7XG4gICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSkgc3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgIHZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuICAgICAgY29uc3QgZGlmZiA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHN0YXJ0WDtcbiAgICAgIGlmIChkaWZmID4gU1dJUEVfVEhSRVNIT0xEKSBwcmV2KCk7XG4gICAgICBpZiAoZGlmZiA8IC1TV0lQRV9USFJFU0hPTEQpIG5leHQoKTtcbiAgICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7XG5cbiAgICAvLyByZXNpemVcbiAgICBsZXQgcmVzaXplVGltZXI7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdXBkYXRlKGZhbHNlKSwgMTAwKTtcbiAgICB9KTtcblxuICAgIHVwZGF0ZShmYWxzZSk7XG5cbiAgICByZXR1cm4geyBuZXh0LCBwcmV2IH07XG4gIH1cblxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXRUYWJsZVNsaWRlcik7XG4gIH0gZWxzZSB7XG4gICAgaW5pdFRhYmxlU2xpZGVyKCk7XG4gIH1cbn0pKCk7XG4iXX0=
